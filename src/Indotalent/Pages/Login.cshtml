@page
@model Indotalent.Pages.LoginModel

<!-- Slick -->
<link type="text/css" rel="stylesheet" href="~/css/slick.css" />
<link type="text/css" rel="stylesheet" href="~/css/slick-theme.css" />

<!-- Custom stylesheet (style.css) -->
<link type="text/css" rel="stylesheet" href="~/css/style.css" />

<!-- Font Awesome -->
<link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

<style>
    /* Main login form container styling */
    .login-container {
        max-width: 500px;
        margin: 40px auto;
        background: #fff;
        border: 1px solid #ddd;
        border-radius: 5px;
        padding: 30px;
    }

        .login-container h2 {
            text-align: center;
            margin-bottom: 20px;
        }

    /* Container where we insert the sign-up partial(s) */
    #signUpChoiceContainer {
        max-width: 700px;
        margin: 30px auto;
        display: none; /* hidden until loaded */
        background: #f9f9f9;
        border: 1px solid #eee;
        border-radius: 5px;
        padding: 20px;
    }

    .choice-card {
        cursor: pointer;
        transition: box-shadow 0.2s;
    }

        .choice-card:hover {
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        }
</style>

<!-- The actual LOGIN SECTION -->
<div class="section">
    <div class="container">
        <div class="row">
            <!-- Full width, single col -->
            <div class="col-md-12">
                <div class="login-container">
                    <h2>Login</h2>

                    <!-- Display validation errors if any -->
                    @if (ModelState.Any(m => m.Value.Errors.Count > 0))
                    {
                        <div class="alert alert-danger">
                            @foreach (var error in ModelState.Values.SelectMany(v => v.Errors))
                            {
                                <div>@error.ErrorMessage</div>
                            }
                        </div>
                    }

                    <!-- Login form -->
                    <form method="post">
                        <div class="form-group">
                            <label>Email</label>
                            <input asp-for="Email" class="form-control" />
                        </div>
                        <div class="form-group">
                            <label>Password</label>
                            <input asp-for="Password" type="password" class="form-control" />
                        </div>
                        <button type="submit" class="btn btn-primary btn-block mt-3">Login</button>
                    </form>

                    <p class="mt-3 text-center">
                        Don't have an account yet?
                        <span id="showSignUpChoice"
                              style="color:blue; text-decoration:underline; cursor:pointer;">
                            Sign up
                        </span>
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- The container for the sign-up partial(s) -->
<div id="signUpChoiceContainer"></div>

<!-- Optionally, if you have a vendor partial or other partial -->
@await Html.PartialAsync("__Vendor")

<!-- JS references -->
<script src="~/js/jquery.min.js"></script>
<script src="~/js/bootstrap.min.js"></script>
<script src="~/landingpage/js/slick.min.js"></script>

<script>
    $(document).ready(function () {
        // Show the sign-up choice partial when user clicks "Sign up"
        $("#showSignUpChoice").on("click", function () {
            // GET the partial from /Login?handler=SignUpChoicePartial
            $.get("@Url.Page("./Login", "SignUpChoicePartial")", function (html) {
                // Insert partial into the container and slide down
                $("#signUpChoiceContainer").html(html).slideDown("fast", function () {
                    // Auto scroll to the sign-up section after it appears
                    $('html, body').animate({
                        scrollTop: $("#signUpChoiceContainer").offset().top
                    }, 600);
                });
            });
        });
    });
</script>
